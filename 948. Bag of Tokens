class Solution {
public:
    int bagOfTokensScore(vector<int>& tokens, int power) {
    sort(tokens.begin(),tokens.end());
    int score=0;
    int l=0,r=tokens.size()-1;
    int max1=0;
    while(l<=r){
        if(tokens[l]<=power){
            power-=tokens[l];
            score++;
            l++;
            max1=max(max1,score);
        }else if(score>0){
            power+=tokens[r];
            r--;
            score--;
        }else{
            break;
        }
    }
        return max1;
    }
};
